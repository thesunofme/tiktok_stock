<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TikTok Accounts Inventory</title>
    <link rel="icon" type="image/png" href="tiktok_logo.png">
    <link rel="shortcut icon" type="image/png" href="tiktok_logo.png">
    <!-- Tailwind CSS - Using CDN for GitHub Pages (acceptable for static sites) -->
    <script>
        // Suppress Tailwind CDN warning - must run BEFORE Tailwind loads
        (function() {
            const originalWarn = console.warn;
            const originalError = console.error;
            const originalLog = console.log;
            
            const checkAndSuppress = function(originalFn) {
                return function(...args) {
                    const message = args[0];
                    if (typeof message === 'string' && (
                        message.includes('cdn.tailwindcss.com should not be used in production') ||
                        message.includes('cdn.tailwindcss.com')
                    )) {
                        return; // Suppress Tailwind CDN warnings/errors
                    }
                    originalFn.apply(console, args);
                };
            };
            
            console.warn = checkAndSuppress(originalWarn);
            console.error = checkAndSuppress(originalError);
            console.log = checkAndSuppress(originalLog);
        })();
    </script>
    <script src="https://cdn.tailwindcss.com" onerror="console.warn = console.warn || function(){}"></script>
    <script>
        // Double-check: suppress any remaining warnings after Tailwind loads
        setTimeout(function() {
            const originalWarn = console.warn;
            console.warn = function(...args) {
                if (args[0] && typeof args[0] === 'string' && args[0].includes('cdn.tailwindcss.com')) {
                    return;
                }
                originalWarn.apply(console, args);
            };
        }, 100);
    </script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/brands.min.css">
    <!-- Preload emoji fonts for better rendering -->
    <style>
        @font-face {
            font-family: 'Segoe UI Emoji';
            src: local('Segoe UI Emoji');
            unicode-range: U+1F1E6-1F1FF;
        }
    </style>
    <style>
        body {
            background-image: url('background.png');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            background-repeat: no-repeat;
            min-height: 100vh;
            padding: 1rem 0.75rem;
            position: relative;
        }
        @media (min-width: 640px) {
            body {
                padding: 2rem 1rem;
            }
        }
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(15, 23, 42, 0.95) 0%, rgba(30, 41, 59, 0.95) 100%);
            z-index: -1;
        }
        .card {
            background: rgba(30, 41, 59, 0.9);
            backdrop-filter: blur(10px);
            border-radius: 1rem;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        @media (min-width: 640px) {
            .card {
                border-radius: 1.5rem;
            }
        }
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 25px 70px rgba(0, 0, 0, 0.7);
            border-color: rgba(255, 255, 255, 0.2);
        }
        @media (max-width: 639px) {
            .card:hover {
                transform: none;
            }
        }
        .stock-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.25rem;
            padding: 0.375rem 0.75rem;
            border-radius: 9999px;
            font-weight: 600;
            font-size: 0.75rem;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
            white-space: nowrap;
        }
        @media (min-width: 640px) {
            .stock-badge {
                gap: 0.5rem;
                padding: 0.5rem 1rem;
                font-size: 0.875rem;
            }
        }
        .stock-temp {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
        }
        .stock-fresh {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
        }
        .stock-full {
            background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
            color: white;
        }
        .stock-trusted {
            background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
            color: white;
        }
        .region-card {
            transition: all 0.3s ease;
            border: 2px solid rgba(255, 255, 255, 0.1);
            position: relative;
            overflow: hidden;
            background: rgba(30, 41, 59, 0.8) !important;
        }
        .region-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #8b5cf6, #6366f1);
            transform: scaleX(0);
            transition: transform 0.3s ease;
        }
        .region-card:hover::before {
            transform: scaleX(1);
        }
        .region-card:hover {
            border-color: #8b5cf6;
            transform: scale(1.02);
            box-shadow: 0 10px 25px rgba(139, 92, 246, 0.3);
            background: rgba(30, 41, 59, 0.95) !important;
        }
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        .animate-fadeIn {
            animation: fadeIn 0.6s ease-out;
        }
        .summary-card {
            background: linear-gradient(135deg, #1e293b 0%, #334155 100%);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        .summary-item {
            background: rgba(15, 23, 42, 0.6);
            backdrop-filter: blur(10px);
            border-radius: 0.75rem;
            padding: 1rem;
            transition: all 0.3s ease;
            border: 1px solid rgba(255, 255, 255, 0.05);
        }
        @media (min-width: 640px) {
            .summary-item {
                border-radius: 1rem;
                padding: 1.5rem;
            }
        }
        .summary-item:hover {
            background: rgba(15, 23, 42, 0.8);
            transform: translateY(-3px);
            border-color: rgba(255, 255, 255, 0.1);
        }
        @media (max-width: 639px) {
            .summary-item:hover {
                transform: none;
            }
        }
        .loading {
            text-align: center;
            padding: 2rem 1rem;
            color: white;
        }
        @media (min-width: 640px) {
            .loading {
                padding: 3rem;
            }
        }
        .loading-spinner {
            border: 4px solid rgba(255, 255, 255, 0.3);
            border-top: 4px solid white;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 1rem;
        }
        @media (min-width: 640px) {
            .loading-spinner {
                width: 50px;
                height: 50px;
            }
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .error {
            background: rgba(239, 68, 68, 0.2);
            border: 2px solid #ef4444;
            color: #fca5a5;
            padding: 1.5rem;
            border-radius: 0.5rem;
            text-align: center;
        }
        .flag-icon {
            font-size: 1.5rem;
            margin-right: 0.5rem;
            font-family: "Segoe UI Emoji", "Segoe UI Symbol", "Apple Color Emoji", "Noto Color Emoji", "Twemoji Mozilla", "EmojiOne Color", "Android Emoji", "EmojiSymbols", "EmojiOne Mozilla", "Segoe UI", sans-serif;
            font-style: normal;
            font-weight: normal;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            display: inline-block;
            line-height: 1;
            vertical-align: middle;
            text-rendering: optimizeLegibility;
            flex-shrink: 0;
            /* Force emoji rendering on Windows */
            font-feature-settings: "liga" off;
            font-variant-emoji: emoji;
            /* Prevent text selection issues */
            user-select: none;
            -webkit-user-select: none;
            /* Ensure proper display */
            unicode-bidi: isolate;
            direction: ltr;
            /* Force emoji display */
            font-variant: normal;
            text-transform: none;
            letter-spacing: 0;
            word-spacing: 0;
        }
        /* Windows-specific fixes - Edge/IE */
        @supports (-ms-ime-align: auto) {
            .flag-icon {
                font-family: "Segoe UI Emoji", "Segoe UI Symbol", sans-serif !important;
                font-size: 1.6rem !important;
            }
        }
        /* Chrome/Edge on Windows - force Segoe UI Emoji */
        @media screen and (-webkit-min-device-pixel-ratio: 0) {
            .flag-icon {
                font-family: "Segoe UI Emoji", "Segoe UI Symbol", "Apple Color Emoji", "Noto Color Emoji", sans-serif !important;
            }
        }
        /* Firefox on Windows */
        @-moz-document url-prefix() {
            .flag-icon {
                font-family: "Segoe UI Emoji", "Apple Color Emoji", "Noto Color Emoji", "Twemoji Mozilla", sans-serif !important;
            }
        }
        /* Additional fix for Windows 10/11 */
        @media screen {
            .flag-icon {
                -webkit-font-feature-settings: normal;
                font-feature-settings: normal;
            }
        }
        .flag-emoji {
            font-family: "Segoe UI Emoji", "Segoe UI Symbol", "Apple Color Emoji", "Noto Color Emoji", "Twemoji Mozilla", "EmojiOne Color", "Android Emoji", "EmojiSymbols", "EmojiOne Mozilla", "Segoe UI", sans-serif;
            font-style: normal;
            font-weight: normal;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            display: inline-block;
            line-height: 1;
            font-size: 1.4rem !important;
            vertical-align: middle;
            text-rendering: optimizeLegibility;
            width: 1.5rem;
            height: 1.5rem;
            text-align: center;
            flex-shrink: 0;
            font-feature-settings: "liga" off;
            font-variant-emoji: emoji;
            user-select: none;
            -webkit-user-select: none;
            unicode-bidi: isolate;
            direction: ltr;
        }
        .empty-state {
            text-align: center;
            padding: 3rem;
            color: #6b7280;
        }
        .empty-state i {
            font-size: 4rem;
            margin-bottom: 1rem;
            opacity: 0.5;
        }
        .logo-header {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.75rem;
            flex-wrap: wrap;
            margin-bottom: 0.75rem;
        }
        @media (min-width: 640px) {
            .logo-header {
                gap: 1rem;
                margin-bottom: 1rem;
            }
        }
        .logo-header img {
            filter: drop-shadow(0 4px 6px rgba(0, 0, 0, 0.3));
            transition: transform 0.3s ease;
            height: 3rem;
            width: 3rem;
        }
        @media (min-width: 640px) {
            .logo-header img {
                height: 4rem;
                width: 4rem;
            }
        }
        .logo-header img:hover {
            transform: scale(1.1);
        }
        @media (max-width: 639px) {
            .logo-header img:hover {
                transform: none;
            }
        }
        .update-notice {
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 9999px;
            padding: 0.5rem 1rem;
            display: inline-block;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            font-size: 0.75rem;
        }
        @media (min-width: 640px) {
            .update-notice {
                padding: 0.5rem 1.5rem;
                font-size: 0.875rem;
            }
        }
        .update-notice:hover {
            background: rgba(255, 255, 255, 0.25);
            transform: translateY(-2px);
            box-shadow: 0 6px 8px rgba(0, 0, 0, 0.15);
        }
        @media (max-width: 640px) {
            .logo-header {
                flex-direction: column;
                gap: 0.5rem;
            }
            .logo-header h1 {
                font-size: 2.5rem;
            }
            .logo-header img {
                height: 3rem;
                width: 3rem;
            }
        }
    </style>
</head>
<body>
    <div class="max-w-7xl mx-auto">
        <!-- Header -->
            <div class="text-center mb-6 md:mb-8 animate-fadeIn">
            <div class="logo-header">
                <img src="tiktok_logo.png" alt="TikTok Logo" class="object-contain">
                <h1 class="text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-extrabold text-white drop-shadow-lg">
                    TikTok Accounts Inventory
                </h1>
            </div>
            <p class="text-sm sm:text-base md:text-lg lg:text-xl text-white/90 mb-2 md:mb-3">Real-time stock availability by country</p>
            <div class="update-notice">
                <p class="text-white font-semibold">
                    <i class="fas fa-clock"></i> Inventory auto-updates every 5 minutes
                </p>
            </div>
        </div>

        <!-- Loading State -->
        <div id="loading" class="loading">
            <div class="loading-spinner"></div>
            <div class="text-lg sm:text-xl md:text-2xl mb-2">Loading inventory data...</div>
            <div class="text-xs sm:text-sm opacity-75">Please wait</div>
        </div>

        <!-- Error State -->
        <div id="error" class="error" style="display: none;">
            <div class="text-lg sm:text-xl font-bold mb-2">
                <i class="fas fa-exclamation-triangle"></i> Error Loading Data
            </div>
            <div id="error-message" class="mb-3 sm:mb-4 text-sm sm:text-base"></div>
            <button onclick="loadData()" class="bg-red-600 text-white px-4 sm:px-6 py-2 rounded-lg hover:bg-red-700 transition-colors font-semibold text-sm sm:text-base">
                <i class="fas fa-redo"></i> Retry
            </button>
        </div>

        <!-- Content -->
        <div id="content" style="display: none;">
            <!-- Summary Overview -->
            <div class="summary-card card p-4 sm:p-5 md:p-6 mb-6 md:mb-8 animate-fadeIn">
                <h2 class="text-lg sm:text-xl md:text-2xl font-bold mb-4 md:mb-6 text-center">
                    <i class="fas fa-chart-bar"></i> Inventory Overview
                </h2>
                <div class="grid grid-cols-2 md:grid-cols-4 gap-2 sm:gap-3 md:gap-4">
                    <div class="summary-item text-center">
                        <div class="text-2xl sm:text-3xl md:text-4xl font-bold mb-1 md:mb-2" id="total-temp">0</div>
                        <div class="text-xs sm:text-sm opacity-90 flex items-center justify-center gap-1 sm:gap-2">
                            <i class="fas fa-envelope"></i> <span class="hidden sm:inline">Temporary Email</span><span class="sm:hidden">Temp</span>
                        </div>
                    </div>
                    <div class="summary-item text-center">
                        <div class="text-2xl sm:text-3xl md:text-4xl font-bold mb-1 md:mb-2" id="total-fresh">0</div>
                        <div class="text-xs sm:text-sm opacity-90 flex items-center justify-center gap-1 sm:gap-2">
                            <i class="fas fa-seedling"></i> <span class="hidden sm:inline">Fresh Account</span><span class="sm:hidden">Fresh</span>
                        </div>
                    </div>
                    <div class="summary-item text-center">
                        <div class="text-2xl sm:text-3xl md:text-4xl font-bold mb-1 md:mb-2" id="total-full">0</div>
                        <div class="text-xs sm:text-sm opacity-90 flex items-center justify-center gap-1 sm:gap-2">
                            <i class="fas fa-user-check"></i> <span class="hidden sm:inline">Full Setup</span><span class="sm:hidden">Full</span>
                        </div>
                    </div>
                    <div class="summary-item text-center">
                        <div class="text-2xl sm:text-3xl md:text-4xl font-bold mb-1 md:mb-2" id="total-trusted">0</div>
                        <div class="text-xs sm:text-sm opacity-90 flex items-center justify-center gap-1 sm:gap-2">
                            <i class="fas fa-shield-alt"></i> <span class="hidden sm:inline">Trusted</span><span class="sm:hidden">Trust</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Countries List -->
            <div class="card p-4 sm:p-5 md:p-6 animate-fadeIn">
                <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 sm:gap-4 mb-4 md:mb-6">
                    <h2 class="text-xl sm:text-2xl md:text-3xl font-bold text-white">
                        <i class="fas fa-globe"></i> Inventory by Country
                    </h2>
                    <div class="text-xs sm:text-sm text-gray-300 bg-gray-700/50 px-3 sm:px-4 py-1.5 sm:py-2 rounded-full border border-gray-600 self-center sm:self-auto">
                        <i class="fas fa-list"></i> Total: <span id="total-countries" class="font-bold text-white">0</span> countries
                    </div>
                </div>
                
                <div id="regions-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4">
                    <!-- Regions will be inserted here by JavaScript -->
                </div>
            </div>
        </div>

        <!-- Contact Information -->
        <div class="card p-4 sm:p-5 md:p-6 mt-6 md:mt-8 animate-fadeIn">
            <h2 class="text-lg sm:text-xl md:text-2xl font-bold text-white mb-3 md:mb-4 text-center">
                <i class="fas fa-envelope"></i> Contact Us
            </h2>
            <div class="flex flex-col sm:flex-row items-stretch sm:items-center justify-center gap-3 sm:gap-4 md:gap-6">
                <a href="https://t.me/reelduck" target="_blank" rel="noopener noreferrer" 
                   class="flex items-center justify-center sm:justify-start gap-2 sm:gap-3 bg-blue-500 hover:bg-blue-600 text-white px-4 sm:px-6 py-2.5 sm:py-3 rounded-lg transition-all duration-200 shadow-md hover:shadow-lg transform hover:scale-105 w-full sm:w-auto">
                    <i class="fab fa-telegram-plane text-xl sm:text-2xl"></i>
                    <div class="text-left">
                        <div class="text-xs opacity-90">Telegram</div>
                        <div class="font-semibold text-sm sm:text-base">@reelduck</div>
                    </div>
                </a>
                <a href="mailto:thesunofmegame@gmail.com" 
                   class="flex items-center justify-center sm:justify-start gap-2 sm:gap-3 bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white px-4 sm:px-6 py-2.5 sm:py-3 rounded-lg transition-all duration-200 shadow-md hover:shadow-lg transform hover:scale-105 w-full sm:w-auto">
                    <i class="fas fa-envelope text-xl sm:text-2xl"></i>
                    <div class="text-left">
                        <div class="text-xs opacity-90">Email</div>
                        <div class="font-semibold text-xs sm:text-sm md:text-base break-all sm:break-normal">thesunofmegame@gmail.com</div>
                    </div>
                </a>
            </div>
        </div>

        <!-- Footer -->
        <div class="text-center mt-8 text-white/80 text-sm">
            <p><i class="fas fa-sync-alt"></i> Data updates automatically</p>
            <p class="text-xs mt-1 opacity-75">Last updated: <span id="last-update">-</span></p>
        </div>
    </div>

    <script>
        // Load data from local JSON file (updated by GitHub Actions)
        const DATA_FILE = 'data.json';
        
        // Format number with commas
        function formatNumber(num) {
            return new Intl.NumberFormat('en-US').format(num);
        }
        
        // Format timestamp
        function formatTime(timestamp) {
            const date = new Date(timestamp * 1000);
            return date.toLocaleString('en-US', {
                year: 'numeric',
                month: 'short',
                day: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            });
        }
        
        // Get country flag emoji using Unicode Regional Indicator Symbols
        function getCountryFlag(code) {
            if (!code) return 'üåç';
            
            // Normalize code (uppercase, handle UK/GB)
            let normalizedCode = String(code).toUpperCase().trim();
            
            // Map UK to GB for flag
            if (normalizedCode === 'UK') {
                normalizedCode = 'GB';
            }
            
            // Convert country code to flag emoji using Unicode Regional Indicator Symbols
            // Each letter is converted to its regional indicator symbol (U+1F1E6 to U+1F1FF)
            if (normalizedCode.length === 2) {
                const codePointA = normalizedCode.codePointAt(0);
                const codePointB = normalizedCode.codePointAt(1);
                
                if (codePointA >= 65 && codePointA <= 90 && codePointB >= 65 && codePointB <= 90) {
                    // Convert A-Z (65-90) to Regional Indicator Symbols (U+1F1E6 to U+1F1FF)
                    // U+1F1E6 = 127462 (REGIONAL INDICATOR SYMBOL LETTER A)
                    const flagA = String.fromCodePoint(0x1F1E6 + (codePointA - 65));
                    const flagB = String.fromCodePoint(0x1F1E6 + (codePointB - 65));
                    const flagEmoji = flagA + flagB;
                    
                    // Ensure the emoji is properly formed (should be 2 code points)
                    if (flagEmoji && flagEmoji.length >= 2) {
                        return flagEmoji;
                    }
                }
            }
            
            // Fallback: use predefined flags for common countries
            const flags = {
                'US': 'üá∫üá∏', 'DE': 'üá©üá™', 'FR': 'üá´üá∑', 'GB': 'üá¨üáß', 'UK': 'üá¨üáß', 'CA': 'üá®üá¶',
                'UA': 'üá∫üá¶', 'KZ': 'üá∞üáø', 'AR': 'üá¶üá∑', 'RU': 'üá∑üá∫', 'IT': 'üáÆüáπ',
                'PL': 'üáµüá±', 'CH': 'üá®üá≠', 'MX': 'üá≤üáΩ', 'VN': 'üáªüá≥', 'BY': 'üáßüáæ',
                'ES': 'üá™üá∏', 'BR': 'üáßüá∑', 'KR': 'üá∞üá∑', 'JP': 'üáØüáµ', 'CN': 'üá®üá≥',
                'IN': 'üáÆüá≥', 'AU': 'üá¶üá∫', 'NL': 'üá≥üá±', 'BE': 'üáßüá™', 'SE': 'üá∏üá™',
                'NO': 'üá≥üá¥', 'DK': 'üá©üá∞', 'FI': 'üá´üáÆ', 'PT': 'üáµüáπ', 'GR': 'üá¨üá∑'
            };
            
            return flags[normalizedCode] || 'üåç';
        }
        
        // Display data
        function displayData(data) {
            // Display summary
            document.getElementById('total-temp').textContent = formatNumber(data.summary.total_temp);
            document.getElementById('total-fresh').textContent = formatNumber(data.summary.total_fresh);
            document.getElementById('total-full').textContent = formatNumber(data.summary.total_full);
            document.getElementById('total-trusted').textContent = formatNumber(data.summary.total_trusted);
            document.getElementById('total-countries').textContent = data.summary.total_countries;
            
            // Display last update time
            document.getElementById('last-update').textContent = formatTime(data.timestamp);
            
            // Display countries list
            const container = document.getElementById('regions-container');
            container.innerHTML = '';
            
            if (data.regions.length === 0) {
                container.innerHTML = `
                    <div class="col-span-full empty-state">
                        <i class="fas fa-inbox"></i>
                        <p class="text-lg font-semibold">No inventory data available</p>
                        <p class="text-sm mt-2">Please check back later</p>
                    </div>
                `;
                return;
            }
            
            data.regions.forEach(region => {
                const card = document.createElement('div');
                card.className = 'region-card rounded-xl p-4 sm:p-5 md:p-6 shadow-md';
                
                // Get country flag for header only
                const countryFlag = getCountryFlag(region.code);
                
                let stockHTML = '';
                const stockTypes = [
                    { key: 'temp', label: 'Temporary Email', icon: 'envelope', class: 'stock-temp' },
                    { key: 'fresh', label: 'Fresh Account', icon: 'seedling', class: 'stock-fresh' },
                    { key: 'full', label: 'Full Setup', icon: 'user-check', class: 'stock-full' },
                    { key: 'trusted', label: 'Trusted Account', icon: 'shield-alt', class: 'stock-trusted' }
                ];
                
                stockTypes.forEach(type => {
                    if (region[type.key] > 0) {
                        stockHTML += `
                            <div class="flex items-center justify-between py-1.5 sm:py-2 gap-2">
                                <span class="text-xs sm:text-sm text-gray-300 flex items-center gap-1 sm:gap-2 min-w-0 flex-1">
                                    <i class="fas fa-${type.icon} flex-shrink-0"></i> 
                                    <span class="truncate">${type.label}</span>
                                </span>
                                <span class="stock-badge ${type.class} flex-shrink-0">
                                    <i class="fas fa-box"></i> ${formatNumber(region[type.key])}
                                </span>
                            </div>
                        `;
                    }
                });
                
                if (region.total === 0) {
                    stockHTML = `
                        <div class="text-center py-4">
                            <i class="fas fa-box-open text-gray-500 text-2xl mb-2"></i>
                            <span class="text-gray-500 text-sm block">Out of Stock</span>
                        </div>
                    `;
                }
                
                const totalBadge = region.total > 0 
                    ? `<span class="text-xs font-bold text-green-400 bg-green-900/30 px-3 py-1 rounded-full flex items-center gap-1 whitespace-nowrap border border-green-700/50">
                        <i class="fas fa-check-circle"></i> <span>Total: ${formatNumber(region.total)}</span>
                       </span>`
                    : '';
                
                card.innerHTML = `
                    <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 sm:gap-3 mb-3 md:mb-4">
                        <h3 class="text-lg sm:text-xl font-bold text-white flex items-center">
                            <span class="flag-icon" role="img" aria-label="${region.country} flag">${countryFlag}</span>
                            <span class="truncate">${region.country}</span>
                        </h3>
                        <div class="flex items-center gap-2 flex-wrap">
                            <span class="text-xs font-semibold text-gray-300 bg-gray-700/50 px-2 py-1 rounded-full border border-gray-600 whitespace-nowrap">
                                ${region.code}
                            </span>
                            ${totalBadge}
                        </div>
                    </div>
                    <div class="space-y-1.5 sm:space-y-2">
                        ${stockHTML}
                    </div>
                `;
                
                container.appendChild(card);
            });
        }
        
        // Load data
        async function loadData() {
            const loading = document.getElementById('loading');
            const error = document.getElementById('error');
            const content = document.getElementById('content');
            
            loading.style.display = 'block';
            error.style.display = 'none';
            content.style.display = 'none';
            
            try {
                // Fetch from local JSON file (no external API visible)
                const response = await fetch(DATA_FILE + '?t=' + Date.now());
                
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                
                const data = await response.json();
                
                if (data.success) {
                    displayData(data);
                    loading.style.display = 'none';
                    content.style.display = 'block';
                } else {
                    throw new Error('Invalid data format');
                }
            } catch (err) {
                loading.style.display = 'none';
                error.style.display = 'block';
                document.getElementById('error-message').textContent = err.message;
                console.error('Error loading data:', err);
            }
        }
        
        // Load data on page load
        loadData();
        
        // Auto refresh every 60 seconds
        setInterval(loadData, 60000);
    </script>
</body>
</html>
